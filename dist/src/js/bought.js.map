{"version":3,"sources":["../../../src/js/bought.js"],"names":["$","tabClick","tabs","tabContent","ajax","url","hosturl","type","data","dataType","success","live","length","str","i","liveid","picture","title","name","totalprice","innerHTML","onOff","index","onclick","style","display","className","This","console","log","ticket","tickets_picture","tickets_name","startime","tikeaddress","tprice","done","activityitems","document","querySelectorAll","id","getAttribute","window","location","href"],"mappings":"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","file":"bought.js","sourcesContent":["$(function () {\r\n  tabClick()\r\n})\r\nvar tabs = $('.tab')\r\nvar tabContent = $('.tab_content')\r\n\r\n$.ajax({\r\n  url: hosturl + '/index.php/Client/buyedcourse',\r\n  type: 'get',\r\n  data: {\r\n    type: 1\r\n  },\r\n  dataType: 'json',\r\n  success: function (data) {\r\n    if (data.live.length > 0) {\r\n      var str = ''\r\n      for (var i = 0; i < data.live.length; i++) {\r\n        str += `\r\n        <li class=\"bought_content history\">\r\n          <h3 class=\"title\">\r\n            <span class=\"class_name\">课程包</span>\r\n            <span class=\"status\">已购买</span>\r\n          </h3>\r\n            <a class=\"class_list\" href=\"${hosturl}/index.php/Newautolive/index/id/${data.live[i].liveid}\">\r\n            <img\r\n                src=\"${data.live[i].picture}\" alt=\"\">\r\n            <span class=\"class_info\">\r\n            <span class=\"class_title\">${data.live[i].title}</span>\r\n              <span class=\"class_user\">${data.live[i].name}</span>\r\n            </span>\r\n            <span class=\"price\">￥${data.live[i].totalprice}</span>\r\n          </a>\r\n        </li>\r\n      `\r\n      }\r\n      tabContent[0].innerHTML = str\r\n    } else {\r\n      tabContent[0].innerHTML = `\r\n        <li class=\"bought_record\">\r\n          <span>您还未购买任何课程</span>\r\n        </li>\r\n      `\r\n    }\r\n\r\n  }\r\n})\r\n\r\nfunction tabClick() {\r\n  var onOff = true\r\n  for (var i = 0; i < tabs.length; i++) {\r\n    tabs[i].index = i\r\n    tabs[i].onclick = function () {\r\n      for (var i = 0; i < tabContent.length; i++) {\r\n        tabContent[i].style.display = 'none'\r\n        tabs[i].className = 'tab'\r\n      }\r\n      tabContent[this.index].style.display = 'block'\r\n      tabs[this.index].className = 'tab tab_active'\r\n      var This = this\r\n      if (this.index !== 0 && onOff) {\r\n        $.ajax({\r\n          url: hosturl + '/index.php/Client/buyedcourse',\r\n          type: 'get',\r\n          data: {\r\n            type: this.index + 1\r\n          },\r\n          dataType: 'json',\r\n          success: function (data) {\r\n            console.log(data)\r\n            var str = ''\r\n            if (data.ticket.length > 0) {\r\n              for (var i = 0; i < data.ticket.length; i++) {\r\n                str += `\r\n              <li class=\"tickets_item bought_content history\" data-id=\"${data.ticket[i].liveid}\">\r\n                <h3 class=\"title\">\r\n                  <span class=\"status ticket_status\">支付成功</span>\r\n                </h3>\r\n                <ul class=\"activity_content\">\r\n                  <li class=\"activity_item\">\r\n                    <div class=\"activity_left\">\r\n                      <img src=\"${data.ticket[i].tickets_picture}\"\r\n                           alt=\"\">\r\n                    </div>\r\n                    <div class=\"activity_right\">\r\n                      <div class=\"activity_title\">\r\n                        <h2>${data.ticket[i].tickets_name}</h2>\r\n                      </div>\r\n                      <div class=\"time_where\">\r\n                        <time>${data.ticket[i].startime} | ${data.ticket[i].tikeaddress}</time>\r\n                      </div>\r\n                      <div class=\"activity_money\">\r\n                        <span class=\"money_sum\">${data.ticket[i].tprice}</span>\r\n                        <span class=\"money_unit\">元</span>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </li>\r\n              `\r\n              }\r\n              tabContent[1].innerHTML = str\r\n            } else {\r\n              tabContent[1].innerHTML = `\r\n              <li class=\"bought_record\">\r\n                <span>您还未购买任何门票</span>\r\n              </li>\r\n              `\r\n            }\r\n            onOff = false\r\n          }\r\n        }).done(function () {\r\n          var activityitems = document.querySelectorAll('.tickets_item')\r\n          for (var i = 0; i < activityitems.length; i++) {\r\n            activityitems[i].index = i\r\n            activityitems[i].onclick = function () {\r\n              var id = activityitems[this.index].getAttribute('data-id')\r\n              window.location.href = `${hosturl}/index.php/Client/playticket/id/${id}`\r\n            }\r\n          }\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n"]}